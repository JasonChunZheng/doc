%&pdflatex
%
%  Clawpack 5.x (x <= 2) Paper
%
%  Authors:
%
\documentclass[]{siamltex}

\usepackage{graphicx}

% Use utf-8 encoding for foreign characters
\usepackage[utf8]{inputenc}

% Multipart figures
% \usepackage{subcaption}

% More symbols
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{latexsym}

% URL and linking help
\usepackage{hyperref}

% Package for including code in the document
\usepackage{listings}
% \DeclareCaptionFont{white}{\color{white}}
% \DeclareCaptionFormat{listing}{%
%   \parbox{\textwidth}{\colorbox{gray}{\parbox{\textwidth}{#1#2#3}}\vskip-4pt}}
% \captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white}
% \lstset{frame=lrb,xleftmargin=\fboxsep,xrightmargin=-\fboxsep,numbers=left,basicstyle=\ttfamily\small,language=python,columns=fixed,commentstyle=\em\color[rgb]{0.133,0.545,0.133}}

% This is now the recommended way for checking for PDFLaTeX:
\usepackage{ifpdf}

% Add line numbers
\usepackage[mathlines]{lineno}

% Need to use this package to handle the spacing issues in LaTeX after a command
\usepackage{xspace}

% Markup
\usepackage{color}
\newcommand{\comment}[1]{\color{blue} #1}
\newcommand{\alert}[1]{\textbf{\color{red} #1}}

\graphicspath{{./figures/}}



% Useful commands
\include{macros}

\begin{document}

\ifpdf
\DeclareGraphicsExtensions{.pdf, .png, .jpg, .tif}
\else
\DeclareGraphicsExtensions{.png, .jpg, .tif, .eps}
\fi

\title{The Clawpack 5.X Software}

% Authors: Anyone who has....
%  - Made a nontrivial contribution to 5.0, 5.1, 5.2,
%  - Contributes at least a sentence to the paper,
%  - Has read the final draft and agreed to be an author.

\author{
        Aron J. Ahmadia\thanks{
            Army Corp of Engineers (\mbox{aron@awesome.com})} \and
        Marsha Berger\thanks{
            New York University (\mbox{berger@cims.nyu.edu})} \and
        Donna Calhoun\thanks{
            Boise State University (\mbox{donna.calhoun@gmail.com})} \and
        Matthew Emmett\thanks{
            Lawrence Berkeley National Laboratory (\mbox{memmett@gmail.com})} \and
        David George\thanks{
            USGS (\mbox{dgeorge@usgs.gov})} \and
        Yiannis Hadjimichael\thanks{
            King Abdullah University of Science and Technology, Box 4700, Thuwal, Saudi Arabia, 23955-6900 (\mbox{yiannis.hadjimichael@kaust.edu.sa})} \and
        David I. Ketcheson\thanks{
            King Abdullah University of Science and Technology, Box 4700, Thuwal, Saudi Arabia, 23955-6900 (\mbox{david.ketcheson@kaust.edu.sa})} \and
        Randall J. LeVeque\thanks{
            University of Washington (\mbox{rjl.@uw.edu})} \and
        Kyle T. Mandli\thanks{
            Columbia University}
        }

\maketitle

\begin{abstract}
    Put really awesome abstract here.
\end{abstract}

\section{Introduction}

\section{Development Approach}

\subsection{Github organization, subrepositories}
Clawpack includes several related software projects, each of which is managed in its own repository on Github.  These projects are sub-repositories of the high-level Clawpack repository and are assigned to the Clawpack Github organization.  The set of maintainers -- with push and merge privileges -- is different for each sub-repository.  

The main solver repositories are:
\begin{itemize}
    \item Riemann (Riemann solvers used by all the other projects)
    \item Classic
    \item \amrclaw
    \item \geoclaw
    \item \pyclaw
\end{itemize}

Additional repositories contain documentation and extended examples of using the code:
\begin{itemize}
    \item doc
    \item apps
\end{itemize}

\subsection{Development Model}
\begin{itemize}
    \item forks, master, branches, pull requests
    \item travis CI
\end{itemize}

\section{Advances}
\subsection{Global Changes}
\begin{itemize}
    \item reordering indices
    \item input variables in setrun.py (discuss Python interface to Fortran)
\end{itemize}

\subsection{riemann repository -- used by PyClaw via f2py}

\subsection{Classic}
\begin{itemize}
    \item added 3d with OpenMP
\end{itemize}

\subsection{\amrclaw}
\begin{itemize}
    \item added 3d with OpenMP, 
    \item added regions
    \item other changes motivated by Geoclaw
    \item Spatially varying boundary conditions
\end{itemize}

\subsection{\geoclaw}
\begin{itemize}
    \item NTHMP benchmarks
    \item setaux copying for faster topography integration, recursive 
    \item new topotools and dtopotools
    \item multiple dtopo files
    \item fixed grid monitoring of max values
    \item Spatially varying boundary conditions
\end{itemize}
    
\subsection{\pyclaw}

Later 4.x releases included a number of Python-based tools for handling Clawpack input and output.  The 5.0 release includes a full-fledged Python solver in which the higher-level parts of Clawpack have been reimplemented in Python.  This new solver also includes access to the high-order algorithms introduced in SharpClaw and can be used on large distributed-memory parallel machines.  Lower-level code (whatever gets executed repeatedly and needs to be fast) from the earlier Fortran Classic and SharpClaw codes is automatically wrapped at install time using f2py.

\begin{itemize}
    \item overall structure/languages figure
    \item sharpclaw
    \item petclaw
    \item f2py
    \item pip install
    \item IPython notebooks
\end{itemize}
    
\subsection{visclaw}
\begin{itemize}
    \item Iplotclaw
    \item creation of html pages
    \item JSAnimation
    \item (Once 3d is working, write a separate paper on visclaw as a general tool?)
\end{itemize}

\section{Future Work}
\begin{itemize}
    \item Clawpack 6 ideas
    \item Riemann solvers
    \item ForestClaw
    \item ???
\end{itemize}

\end{document}
